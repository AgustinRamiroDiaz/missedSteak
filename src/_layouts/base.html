<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>{{ title | default("Missed Steak") }}</title>
    <!-- Favicon-->
    <link rel="icon" type="image/x-icon" href="/assets/img/salad.png" />
    <!-- Font Awesome icons (free version)-->
    <script src="https://use.fontawesome.com/releases/v5.15.3/js/all.js" crossorigin="anonymous"></script>
    <!-- Google fonts-->
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css" />
    <link href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet"
        type="text/css" />
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="/css/styles.css" rel="stylesheet" />
</head>

<body id="page-top">
    <!-- Navigation-->
    <nav class="navbar navbar-expand-lg bg-secondary text-uppercase fixed-top" id="mainNav">
        <div class="container">
            <a class="navbar-brand js-scroll-trigger" href="#page-top">Missed Steak</a>
            <button
                class="navbar-toggler navbar-toggler-right text-uppercase font-weight-bold bg-primary text-white rounded"
                type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive"
                aria-expanded="false" aria-label="Toggle navigation">
                Menu
                <i class="fas fa-bars"></i>
            </button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger"
                            href="#portfolio">Savory</a></li>
                    <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger"
                            href="#about">Sweet</a></li>
                    <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded" href="#"
                            data-toggle="modal" data-target="#newRecipeModal"><i class="fas fa-plus mr-1"></i>New
                            Recipe</a></li>
                </ul>
            </div>
        </div>
    </nav>

    {{ content | safe }}

    <!-- Footer-->
    <footer class="footer text-center">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 mb-5 mb-lg-0">
                    <h4 class="text-uppercase mb-4">
                        La peque</h4>
                    <p class="lead mb-0">
                        Patagonia
                        <br />
                        Argentina
                    </p>
                </div>
                <div class="col-lg-4 mb-5 mb-lg-0">
                    <h4 class="text-uppercase mb-4">Yo en otros lugares</h4>
                    <a class="btn btn-outline-light btn-social mx-1" href="https://www.instagram.com/magalipujoll/"><i
                            class="fab fa-fw fa-instagram"></i></a>
                    <a class="btn btn-outline-light btn-social mx-1" href="https://github.com/magalipujol"><i
                            class="fab fa-fw fa-github"></i></a>
                </div>
            </div>
        </div>
    </footer>

    <!-- New Recipe Modal -->
    <div class="portfolio-modal modal fade" id="newRecipeModal" tabindex="-1" role="dialog"
        aria-labelledby="newRecipeModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl" role="document">
            <div class="modal-content">
                <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true"><i class="fas fa-times"></i></span>
                </button>
                <div class="modal-body text-center">
                    <div class="container">
                        <div class="row justify-content-center">
                            <div class="col-lg-8">
                                <!-- Modal Title-->
                                <h2 class="portfolio-modal-title text-secondary text-uppercase mb-0"
                                    id="newRecipeModalLabel">Add New Recipe</h2>
                                <!-- Icon Divider-->
                                <div class="divider-custom">
                                    <div class="divider-custom-line"></div>
                                    <div class="divider-custom-icon"><i class="fas fa-utensils"></i></div>
                                    <div class="divider-custom-line"></div>
                                </div>
                                <!-- Recipe Form -->
                                <form id="recipeForm" class="mb-5">
                                    <div class="form-group">
                                        <label for="recipeTitle">Recipe Title</label>
                                        <input type="text" class="form-control" id="recipeTitle" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="recipeImage">Image URL</label>
                                        <input type="url" class="form-control" id="recipeImage" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="recipeInstructions">Instructions</label>
                                        <textarea class="form-control" id="recipeInstructions" rows="5"
                                            required></textarea>
                                    </div>
                                    <div class="form-group">
                                        <label for="recipeLink">Original Recipe Link (optional)</label>
                                        <input type="url" class="form-control" id="recipeLink">
                                    </div>
                                    <div class="form-group">
                                        <label>Recipe Type</label>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="recipeType"
                                                id="typeSavory" value="savory" checked>
                                            <label class="form-check-label" for="typeSavory">
                                                Savory
                                            </label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="recipeType"
                                                id="typeSweet" value="sweet">
                                            <label class="form-check-label" for="typeSweet">
                                                Sweet
                                            </label>
                                        </div>
                                    </div>
                                    <button type="button" id="submitRecipe" class="btn btn-primary">
                                        <i class="fas fa-upload mr-1"></i>Submit Recipe
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scroll to Top Button (Only visible on small and extra-small screen sizes)-->
    <div class="scroll-to-top d-lg-none position-fixed">
        <a class="js-scroll-trigger d-block text-center text-white rounded" href="#page-top"><i
                class="fa fa-chevron-up"></i></a>
    </div>

    <!-- Bootstrap core JS-->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Third party plugin JS-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <!-- Contact form JS-->
    <script src="/assets/mail/jqBootstrapValidation.js"></script>
    <script src="/assets/mail/contact_me.js"></script>
    <!-- Core theme JS-->
    <script src="/js/scripts.js"></script>

    <!-- Recipe Submission JS -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            document.getElementById('submitRecipe').addEventListener('click', function () {
                // Get form values
                const title = document.getElementById('recipeTitle').value;
                const image = document.getElementById('recipeImage').value;
                const instructions = document.getElementById('recipeInstructions').value;
                const link = document.getElementById('recipeLink').value;
                const type = document.querySelector('input[name="recipeType"]:checked').value;

                // Convert newlines to <br> tags in instructions
                const formattedInstructions = instructions.replace(/\n/g, '<br>');

                // Create JSON object
                const recipeData = {
                    title: title,
                    image: image,
                    instructions: formattedInstructions,
                    link: link,
                };

                // Convert to JSON and encode for URL
                const jsonData = JSON.stringify(recipeData, null, 2);
                const encodedData = encodeURIComponent(jsonData);

                // Create filename based on title
                const filename = title.toLowerCase().replace(/\s+/g, '-') + '.json';

                // Construct GitHub URL
                const usernameSlashRepo = "{{ site.github.usernameSlashRepo }}";

                const githubUrl = `https://github.com/${usernameSlashRepo}/new/main/src/_data/recipes/${type}?filename=${filename}&value=${encodedData}`;

                // Redirect to GitHub
                window.open(githubUrl, '_blank');
            });
        });
    </script>

    <script>
        function deleteRecipe(filename, type) {
            // Construct GitHub URL for deletion
            const usernameSlashRepo = "{{ site.github.usernameSlashRepo }}";

            const githubUrl = `https://github.com/${usernameSlashRepo}/delete/main/src/_data/recipes/${type}/${filename}.json`;

            // Redirect to GitHub
            window.open(githubUrl, '_blank');
        }
    </script>
</body>

</html>
